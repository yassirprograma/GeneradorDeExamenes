<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="utf-8">
        <title>Cuestionario</title>
        <link rel="stylesheet" href="css/cuestionarios.css">
        <link rel="stylesheet" href="css/ventana_modal.css">

        <link rel="shortcut icon" href="imgs/icon.png">
        
        <script src="./js/jquery-3.6.0.js"></script>

        <script src="./saveinfousuario.js"></script> <!--PARA GUARDAR EN ALMACENAMIENTO LOCAL LA INFOGRMACIÓN DEL USUARIO Y LA UNIDAD TEMÁTICA QUE ELIGIÓ -->

        <script src="./funciones_Cuestionario.js"></script>



        <link rel="stylesheet"href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/> <!--https://animate.style/-->
    </head>
    <body>


          <script>

                //ALMACENAMOSEN VARIABLES 
                var usuario=getQueryVariable('usuario'); 
                usuario=usuario.replaceAll("+"," ");            
                var boleta=getQueryVariable('boleta'); 
                var unidad=getQueryVariable('unidad'); 
                
          </script>





        <header class="animate__animated animate__fadeInLeft">
            <div id="header" >
                  <script>
                        document.open(); 
                        //*****************************escribo en el header la información del usuario
                        document.write("<h1 class='animate__animated animate__pulse animate__infinite'>Examen de la unidad temática "+unidad+"</h1>");
                        document.write("<h2 class='animate__animated animate__fadeInDown '>Nombre de usuario: "+usuario+"</h2>");
                        document.write("<h2 class='animate__animated animate__fadeInDown '>Número de boleta: "+boleta+"</h2>");
                                                
                  </script>                                    
            </div>
                  
        </header>

        <script>//verpreguntasconsola(unidad);</script>

        <div id="main" class="animate__animated animate__fadeInLeft">
            <form action="" method=""> <!--EN ACTION O METHOD DEBEMOS COLOCAR LA FUNCIÓN O ARCHIVO DE JS QUE VA A PROCESAR EL FORMULARIO-->
                                       <!--AL ENVIAR EL FORMULARIO DEBE VERIFICARSE QUE TODAS LAS RESPUESTAS ESTÉN CONTESTADAS-->


                <div class="pregunta" id="preg1">  <!--**************PREGUNTA1*++++++++++++++++++++++++-->
                    <div class="descripcion" id="desc_preg1">
                        
                    </div>
                    <br>
                    <div class="imagen">
                        <br><img src="#" id="img_preg1" alt=" ">
                    </div>
                    <br>
                    <div class="opciones">
                        <!-- 
                             ¡ATENCIÓN !!!!!!!!!!!!!!!!
                              Cada opción tiene un id irrepetible para cada una de las 10 preguntas
                              El atributo value es el que el formulario guarda, hay cuatro opciones, a,b,c,d
                        -->
                        <div><span>a.</span><input type="radio" id="a_preg1" name="resp_preg1" value="a"> <label for="a_preg1" id="label_a_preg1"></label> <br><img  class="imgopcion" src="#" alt=" " id="img_a_preg1"> <br><br></div>
                        <div><span>b.</span><input type="radio" id="b_preg1" name="resp_preg1" value="b"> <label for="b_preg1" id="label_b_preg1"></label> <br><img  class="imgopcion" src="#" alt=" " id="img_b_preg1"> <br><br></div>
                        <div><span>c.</span><input type="radio" id="c_preg1" name="resp_preg1" value="c"> <label for="c_preg1" id="label_c_preg1"></label> <br><img  class="imgopcion" src="#" alt=" " id="img_c_preg1"> <br><br></div>
                        <div><span>d.</span><input type="radio" id="d_preg1" name="resp_preg1" value="d"> <label for="d_preg1" id="label_d_preg1"></label> <br><img  class="imgopcion" src="#" alt=" " id="img_d_preg1"> <br><br></div>
                    </div>
                </div> 

                <br>
                <br>

                <div class="pregunta" id="preg2"> <!--**************PREGUNTA2*++++++++++++++++++++++++-->
                  <div class="descripcion" id="desc_preg2">
                      <h2> </h2>
                  </div>
                  <br>
                  <div class="imagen">
                      <br><img src="#" id="img_preg2" alt=" ">
                  </div>
                  <br>
                  <div class="opciones">
                      <!-- RECORDATORIO: LA OPCIÓN QUE SE SELCCIONE, SERÁ  -->
                      <div><span>a.</span><input type="radio" id="a_preg2" name="resp_preg2" value="a"> <label for="a_preg2" id="label_a_preg2"></label> <br><img class="imgopcion" src="#" alt=" " id="img_a_preg2"> <br><br></div>
                      <div><span>b.</span><input type="radio" id="b_preg2" name="resp_preg2" value="b"> <label for="b_preg2" id="label_b_preg2"></label> <br><img class="imgopcion" src="#" alt=" " id="img_b_preg2"> <br><br></div>
                      <div><span>c.</span><input type="radio" id="c_preg2" name="resp_preg2" value="c"> <label for="c_preg2" id="label_c_preg2"></label> <br><img class="imgopcion" src="#" alt=" " id="img_c_preg2"> <br><br></div>
                      <div><span>d.</span><input type="radio" id="d_preg2" name="resp_preg2" value="d"> <label for="d_preg2" id="label_d_preg2"></label> <br><img class="imgopcion" src="#" alt=" " id="img_d_preg2"> <br><br></div>
                  </div>
              </div>

              <br>
              <br>


              <div class="pregunta" id="preg3"> <!--**************PREGUNTA3*++++++++++++++++++++++++-->
                  <div class="descripcion" id="desc_preg3">
                      <h2> </h2>
                  </div>
                  <br>
                  <div class="imagen">
                      <br><img src="#" id="img_preg3" alt=" ">
                  </div>
                  <br>
                  <div class="opciones">
                      <!-- RECORDATORIO: LA OPCIÓN QUE SE SELCCIONE, SERÁ  -->
                      <div><span>a.</span><input type="radio" id="a_preg3" name="resp_preg3" value="a"> <label for="a_preg3" id="label_a_preg3"></label> <br><img class="imgopcion" src="#" alt=" " id="img_a_preg3"> <br><br></div>
                      <div><span>b.</span><input type="radio" id="b_preg3" name="resp_preg3" value="b"> <label for="b_preg3" id="label_b_preg3"></label> <br><img class="imgopcion" src="#" alt=" " id="img_b_preg3"> <br><br></div>
                      <div><span>c.</span><input type="radio" id="c_preg3" name="resp_preg3" value="c"> <label for="c_preg3" id="label_c_preg3"></label> <br><img class="imgopcion" src="#" alt=" " id="img_c_preg3"> <br><br></div>
                      <div><span>d.</span><input type="radio" id="d_preg3" name="resp_preg3" value="d"> <label for="d_preg3" id="label_d_preg3"></label> <br><img class="imgopcion" src="#" alt=" " id="img_d_preg3"> <br><br></div>
                  </div>
              </div>

              <br>
              <br>


              <div class="pregunta" id="preg4"> <!--**************PREGUNTA 4*++++++++++++++++++++++++-->
                  <div class="descripcion" id="desc_preg4">
                      <h2> </h2>
                  </div>
                  <br>
                  <div class="imagen">
                      <br><img src="#" id="img_preg4" alt=" ">
                  </div>
                  <br>
                  <div class="opciones">
                      <!-- RECORDATORIO: LA OPCIÓN QUE SE SELCCIONE, SERÁ  -->
                      <div><span>a.</span><input type="radio" id="a_preg4" name="resp_preg4" value="a"> <label for="a_preg4" id="label_a_preg4"></label> <br><img class="imgopcion" src="#" alt=" " id="img_a_preg4"> <br><br></div>
                      <div><span>b.</span><input type="radio" id="b_preg4" name="resp_preg4" value="b"> <label for="b_preg4" id="label_b_preg4"></label> <br><img class="imgopcion" src="#" alt=" " id="img_b_preg4"> <br><br></div>
                      <div><span>c.</span><input type="radio" id="c_preg4" name="resp_preg4" value="c"> <label for="c_preg4" id="label_c_preg4"></label> <br><img class="imgopcion" src="#" alt=" " id="img_c_preg4"> <br><br></div>
                      <div><span>d.</span><input type="radio" id="d_preg4" name="resp_preg4" value="d"> <label for="d_preg4" id="label_d_preg4"></label> <br><img class="imgopcion" src="#" alt=" " id="img_d_preg4"> <br><br></div>
                  </div>
              </div>

              <br>
              <br>


              <div class="pregunta" id="preg5"> <!--**************PREGUNTA 5*++++++++++++++++++++++++-->
                  <div class="descripcion" id="desc_preg5">
                      <h2> </h2>
                  </div>
                  <br>
                  <div class="imagen">
                      <br><img src="#" id="img_preg5" alt=" ">
                  </div>
                  <br>
                  <div class="opciones">
                      <!-- RECORDATORIO: LA OPCIÓN QUE SE SELCCIONE, SERÁ  -->
                      <div><span>a.</span><input type="radio" id="a_preg5" name="resp_preg5" value="a"> <label for="a_preg5" id="label_a_preg5"></label> <br><img class="imgopcion" src="#" alt=" " id="img_a_preg5"> <br><br></div>
                      <div><span>b.</span><input type="radio" id="b_preg5" name="resp_preg5" value="b"> <label for="b_preg5" id="label_b_preg5"></label> <br><img class="imgopcion" src="#" alt=" " id="img_b_preg5"> <br><br></div>
                      <div><span>c.</span><input type="radio" id="c_preg5" name="resp_preg5" value="c"> <label for="c_preg5" id="label_c_preg5"></label> <br><img class="imgopcion" src="#" alt=" " id="img_c_preg5"> <br><br></div>
                      <div><span>d.</span><input type="radio" id="d_preg5" name="resp_preg5" value="d"> <label for="d_preg5" id="label_d_preg5"></label> <br><img class="imgopcion" src="#" alt=" " id="img_d_preg5"> <br><br></div>
                  </div>
              </div>

              <br>
              <br>



              <div class="pregunta" id="preg6"> <!--**************PREGUNTA 6*++++++++++++++++++++++++-->
                  <div class="descripcion" id="desc_preg6">
                      <h2> </h2>
                  </div>
                  <br>
                  <div class="imagen">
                      <br><img src="#" id="img_preg6" alt=" ">
                  </div>
                  <br>
                  <div class="opciones">
                      <!-- RECORDATORIO: LA OPCIÓN QUE SE SELCCIONE, SERÁ  -->
                      <div><span>a.</span><input type="radio" id="a_preg6" name="resp_preg6" value="a"> <label for="a_preg6" id="label_a_preg6"></label> <br><img class="imgopcion" src="#" alt=" " id="img_a_preg6"> <br><br></div>
                      <div><span>b.</span><input type="radio" id="b_preg6" name="resp_preg6" value="b"> <label for="b_preg6" id="label_b_preg6"></label> <br><img class="imgopcion" src="#" alt=" " id="img_b_preg6"> <br><br></div>
                      <div><span>c.</span><input type="radio" id="c_preg6" name="resp_preg6" value="c"> <label for="c_preg6" id="label_c_preg6"></label> <br><img class="imgopcion" src="#" alt=" " id="img_c_preg6"> <br><br></div>
                      <div><span>d.</span><input type="radio" id="d_preg6" name="resp_preg6" value="d"> <label for="d_preg6" id="label_d_preg6"></label> <br><img class="imgopcion" src="#" alt=" " id="img_d_preg6"> <br><br></div>
                  </div>
              </div>

              <br>
              <br>


              <div class="pregunta" id="preg7"> <!--**************PREGUNTA 7*++++++++++++++++++++++++-->
                  <div class="descripcion" id="desc_preg7">
                      <h2> </h2>
                  </div>
                  <br>
                  <div class="imagen">
                      <br><img src="#" id="img_preg7" alt=" ">
                  </div>
                  <br>
                  <div class="opciones">
                      <!-- RECORDATORIO: LA OPCIÓN QUE SE SELCCIONE, SERÁ  -->
                      <div><span>a.</span><input type="radio" id="a_preg7" name="resp_preg7" value="a"> <label for="a_preg7" id="label_a_preg7"></label> <br><img class="imgopcion" src="#" alt=" " id="img_a_preg7"> <br><br></div>
                      <div><span>b.</span><input type="radio" id="b_preg7" name="resp_preg7" value="b"> <label for="b_preg7" id="label_b_preg7"></label> <br><img class="imgopcion" src="#" alt=" " id="img_b_preg7"> <br><br></div>
                      <div><span>c.</span><input type="radio" id="c_preg7" name="resp_preg7" value="c"> <label for="c_preg7" id="label_c_preg7"></label> <br><img class="imgopcion" src="#" alt=" " id="img_c_preg7"> <br><br></div>
                      <div><span>d.</span><input type="radio" id="d_preg7" name="resp_preg7" value="d"> <label for="d_preg7" id="label_d_preg7"></label> <br><img class="imgopcion" src="#" alt=" " id="img_d_preg7"> <br><br></div>
                  </div>
              </div>

              <br>
              <br>


              <div class="pregunta" id="preg8"> <!--**************PREGUNTA 8*++++++++++++++++++++++++-->
                  <div class="descripcion" id="desc_preg8">
                      <h2> </h2>
                  </div>
                  <br>
                  <div class="imagen">
                      <br><img src="#" id="img_preg8" alt=" ">
                  </div>
                  <br>
                  <div class="opciones">
                      <!-- RECORDATORIO: LA OPCIÓN QUE SE SELCCIONE, SERÁ  -->
                      <div><span>a.</span><input type="radio" id="a_preg8" name="resp_preg8" value="a"> <label for="a_preg8" id="label_a_preg8"></label> <br><img class="imgopcion" src="#" alt=" " id="img_a_preg8"> <br><br></div>
                      <div><span>b.</span><input type="radio" id="b_preg8" name="resp_preg8" value="b"> <label for="b_preg8" id="label_b_preg8"></label> <br><img class="imgopcion" src="#" alt=" " id="img_b_preg8"> <br><br></div>
                      <div><span>c.</span><input type="radio" id="c_preg8" name="resp_preg8" value="c"> <label for="c_preg8" id="label_c_preg8"></label> <br><img class="imgopcion" src="#" alt=" " id="img_c_preg8"> <br><br></div>
                      <div><span>d.</span><input type="radio" id="d_preg8" name="resp_preg8" value="d"> <label for="d_preg8" id="label_d_preg8"></label> <br><img class="imgopcion" src="#" alt=" " id="img_d_preg8"> <br><br></div>
                  </div>
              </div>

              <br>
              <br>


              <div class="pregunta" id="preg9"> <!--**************PREGUNTA 9*++++++++++++++++++++++++-->
                  <div class="descripcion" id="desc_preg9">
                      <h2> </h2>
                  </div>
                  <br>
                  <div class="imagen">
                      <br><img src="#" id="img_preg9" alt=" ">
                  </div>
                  <br>
                  <div class="opciones">
                      <!-- RECORDATORIO: LA OPCIÓN QUE SE SELCCIONE, SERÁ  -->
                      <div><span>a.</span><input type="radio" id="a_preg9" name="resp_preg9" value="a"> <label for="a_preg9" id="label_a_preg9"></label> <br><img class="imgopcion" src="#" alt=" " id="img_a_preg9"> <br><br></div>
                      <div><span>b.</span><input type="radio" id="b_preg9" name="resp_preg9" value="b"> <label for="b_preg9" id="label_b_preg9"></label> <br><img class="imgopcion" src="#" alt=" " id="img_b_preg9"> <br><br></div>
                      <div><span>c.</span><input type="radio" id="c_preg9" name="resp_preg9" value="c"> <label for="c_preg9" id="label_c_preg9"></label> <br><img class="imgopcion" src="#" alt=" " id="img_c_preg9"> <br><br></div>
                      <div><span>d.</span><input type="radio" id="d_preg9" name="resp_preg9" value="d"> <label for="d_preg9" id="label_d_preg9"></label> <br><img class="imgopcion" src="#" alt=" " id="img_d_preg9"> <br><br></div>
                  </div>
              </div>

              <br>
              <br>


              <div class="pregunta" id="preg10"> <!--**************PREGUNTA 10*++++++++++++++++++++++++-->
                  <div class="descripcion" id="desc_preg10">
                      <h2> </h2>
                  </div>
                  <br>
                  <div class="imagen">
                      <br><img src="#" id="img_preg10" alt=" ">
                  </div>
                  <br>
                  <div class="opciones">
                      <!-- RECORDATORIO: LA OPCIÓN QUE SE SELCCIONE, SERÁ  -->
                      <div><span>a.</span><input type="radio" id="a_preg10" name="resp_preg10" value="a"> <label for="a_preg10" id="label_a_preg10"></label> <br><img class="imgopcion" src="#" alt=" " id="img_a_preg10"> <br><br></div>
                      <div><span>b.</span><input type="radio" id="b_preg10" name="resp_preg10" value="b"> <label for="b_preg10" id="label_b_preg10"></label> <br><img class="imgopcion" src="#" alt=" " id="img_b_preg10"> <br><br></div>
                      <div><span>c.</span><input type="radio" id="c_preg10" name="resp_preg10" value="c"> <label for="c_preg10" id="label_c_preg10"></label> <br><img class="imgopcion" src="#" alt=" " id="img_c_preg10"> <br><br></div>
                      <div><span>d.</span><input type="radio" id="d_preg10" name="resp_preg10" value="d"> <label for="d_preg10" id="label_d_preg10"></label> <br><img class="imgopcion" src="#" alt=" " id="img_d_preg10"> <br><br></div>
                  </div>
              </div>

              <br>
              <br>


              <script>
                  console.log(unidad);
                  if(unidad=="1"){
                        select_id("header").style.backgroundColor="#3265dc";
                        select_id("main").style.backgroundColor="#3265dc";                                           
                        ajustatamimgopciones(70);
                  }  
                  if(unidad=="2")  {
                        select_id("header").style.backgroundColor="#dc3292c5";
                        select_id("main").style.backgroundColor="#dc3292c5";  
                        ajustatamimgopciones(40);
                  }
                        
                  if(unidad=="3"){
                        select_id("header").style.backgroundColor="#32c5dc";
                        select_id("main").style.backgroundColor="#32c5dc";
                        ajustatamimgopciones(40);
                  }  

                  if(unidad=="4")  {
                        select_id("header").style.backgroundColor="#dc9e32";
                        select_id("main").style.backgroundColor="#dc9e32";
                        ajustatamimgopciones(20);
                  }
                  
                  if(unidad=="5"){
                        select_id("header").style.backgroundColor="#dc324e8f";
                        select_id("main").style.backgroundColor="#dc324e8f";
                  }  
            </script>





                <script> //para generar el cuestionario, desplegar el cuestionario
                    let numPreguntasAleatorias = 10;
                    var cuestionario=generar_N_Preguntas_Aleatorias(numPreguntasAleatorias, unidad); //generamos 10 preguntas de la unidad que se haya seleccionado
                                                                                     //"cuestionario es un arreglo de objetos", donde cada objeto corresponde a una de las preguntas elegidas al azar
                    escribepreguntas(cuestionario); //despliega las 10 preguntas 


                  /* A CONTINUACIÓN SE ENCUENTRA EL ARREGLO CON LAS RESPUESTAS CORRESPONDIENTES A LAS 10 PREGUNTAS GENERADAS ALEATORIAMENTE:*/
                     let solucion_cuestionario=obtenerSolución(cuestionario);

                </script>
                
                <div id="divbotonenviar"><input class="animate__animated animate__pulse animate__infinite" id="botonenviar"  type="button" value="Enviar respuesta"  class="open-modal" data-open="modal" ></div>
                
            </form>            


            <div id="botonvolver">
                  <a href="./index.html">
                        <div>
                              Volver al inicio
                        </div>
                  </a>
            </div>

        </div>
    
        
          
        <div class="modal" id="modal">
            <div class="modal-dialog">
                <header class="modal-header">
                    <p id = "header_resultados"></p>

                <button id="botonCerrarModal" class="close-modal" aria-label="close modal" data-close>
                  ✕  
                </button>
                </header>
            

          

                <div id = "resultados_div"></div>
           


                <div id = "divBotonRevisar">
                    <button id = "botonRevisar">Revisar</button>
                </div>

             </div>
        </div> 
          
    
            <script>
    
            const isVisible = "is-visible";

            document.getElementById("botonenviar").addEventListener("click", function(){
                //Esto sucederá cuando se presione el boton enviar

                if(verificarRadios(numPreguntasAleatorias)){//Antes de mostrar resultados comprobamos
                                                            //que todo esté contestado
      
                    const modalId = this.dataset.open;          //Estas dos lineas muestran la ventana modal
                    document.getElementById(modalId).classList.add(isVisible);

                    let respuestas_usuario = obtenerRespuestasUsuario(numPreguntasAleatorias); //obtenemos un arreglo con las respuestas del usuario
                    let resultado = calificar(respuestas_usuario, solucion_cuestionario);      //Calificamos. El resultado es la cantidad de respuestas correcta

                    escribeResultados(resultado);               //Escribimos los resultados en la ventana modal

                }else
                    alert("Contesta todas las preguntas, por favor");

            });

            //Agregamos los eventos para cuando se presione el boton X
            document.getElementById("botonCerrarModal").addEventListener("click", function() {
                this.parentElement.parentElement.parentElement.classList.remove(isVisible);
            });
            
            //Agregamos el evento para cuando se presione el boton Revisar
            document.getElementById("botonRevisar").addEventListener("click", function() {
                this.parentElement.parentElement.parentElement.classList.remove(isVisible);
                marcarRespuestas(numPreguntasAleatorias,obtenerRespuestasUsuario(numPreguntasAleatorias),solucion_cuestionario);   //Esta funcion marca con colores las respuestas incorrectas 
                document.getElementById("botonenviar").style.display = 'none';
                document.getElementById("botonvolver").style.display='block';
                
                console.log(solucion_cuestionario);
            });

            
            document.close();
            </script>

    </body>
</html>
